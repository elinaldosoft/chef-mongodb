# This config file is auto-generated by chef
# please don't modify manually

# Set 10Gen Recommended ulimits
ulimit -f unlimited
ulimit -t unlimited
ulimit -v unlimited
ulimit -n 64000
ulimit -m unlimited
ulimit -u 32000

DAEMON="<%= @daemon_path %>"
NAME="<%= @name %>"

DAEMON_OPTS=""

<% if @bind_ip -%>
DAEMON_OPTS="$DAEMON_OPTS --bind_ip <%= @bind_ip %>"
<% end -%>
<%= @port ? "DAEMON_OPTS=\"$DAEMON_OPTS --port #{@port}\"" : "" %>
<%= @dbpath ? "DAEMON_OPTS=\"$DAEMON_OPTS --dbpath #{@dbpath}\"" : "" %>
<%= @logpath ? "DAEMON_OPTS=\"$DAEMON_OPTS --logpath #{@logpath}\"" : "" %>

<%= @config ? "DAEMON_OPTS=\"$DAEMON_OPTS --config #{@config}\"" : "" %>
<%= @configdb ? "DAEMON_OPTS=\"$DAEMON_OPTS --configdb #{@configdb}\"" : "" %>

<%= @configsrv ? "DAEMON_OPTS=\"$DAEMON_OPTS --configsvr\"" : "" %>
<%= @shardsrv ? "DAEMON_OPTS=\"$DAEMON_OPTS --shardsvr\"" : "" %>

<% if @replicaset_name %>
DAEMON_OPTS="$DAEMON_OPTS --replSet <%= @replicaset_name %>"
<% end %>

<% if @enable_rest %>
DAEMON_OPTS="$DAEMON_OPTS --rest"
<% end %>

<% if %w(centos redhat fedora amazon).include? node.platform -%>
DAEMON_OPTS="$DAEMON_OPTS --fork"
DBPATH="<%= @dbpath %>"
<% end -%>
